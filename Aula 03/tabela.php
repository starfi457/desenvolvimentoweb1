 
 <?php



$pessoas = array(
    array('nome'=> 'Ana Carolina Alves da Silva', 'dtNascimento'=> '12/05/1990', 'cidade'=> 'Manaus', 'estado'=> 'AM'),
    array('nome'=> 'Pedro Alvares Cabral', 'dtNascimento'=> '12/12/1995', 'cidade'=> 'Maceió', 'estado'=> 'AL'),
    array('nome'=> 'Cristóvão Colombo de Souza', 'dtNascimento'=> '07/05/1989', 'cidade'=> 'Nova Friburgo', 'estado'=> 'RJ'),
    array('nome'=> 'Tarsilla do Amaral', 'dtNascimento'=> '10/07/2010', 'cidade'=> 'Bom Jardim', 'estado'=> 'RJ'),
    array('nome'=> 'João Batista Marques', 'dtNascimento'=> '22/03/1985', 'cidade'=> 'Curitiba', 'estado'=> 'PR'),
    array('nome'=> 'Maria Fernanda Costa', 'dtNascimento'=> '05/11/1993', 'cidade'=> 'Porto Alegre', 'estado'=> 'RS'),
    array('nome'=> 'Lucas Henrique Silva', 'dtNascimento'=> '14/09/1990', 'cidade'=> 'Salvador', 'estado'=> 'BA'),
    array('nome'=> 'Isabela Souza Martins', 'dtNascimento'=> '02/06/2000', 'cidade'=> 'Fortaleza', 'estado'=> 'CE'),
    array('nome'=> 'Carlos Eduardo Lima', 'dtNascimento'=> '17/08/1987', 'cidade'=> 'Recife', 'estado'=> 'PE'),
    array('nome'=> 'Fernanda Alves Rocha', 'dtNascimento'=> '30/01/1991', 'cidade'=> 'Florianópolis', 'estado'=> 'SC'),
    array('nome'=> 'Gabriel Santos Oliveira', 'dtNascimento'=> '11/02/1998', 'cidade'=> 'São Paulo', 'estado'=> 'SP'),
    array('nome'=> 'Juliana Mendes Cardoso', 'dtNascimento'=> '27/04/1995', 'cidade'=> 'Rio de Janeiro', 'estado'=> 'RJ'),
    array('nome'=> 'Paulo Roberto Nunes', 'dtNascimento'=> '08/10/1982', 'cidade'=> 'Belo Horizonte', 'estado'=> 'MG'),
    array('nome'=> 'Larissa Camargo Monteiro', 'dtNascimento'=> '21/12/1988', 'cidade'=> 'Vitória', 'estado'=> 'ES'),
    array('nome'=> 'Rafael Vieira Gomes', 'dtNascimento'=> '06/07/1992', 'cidade'=> 'Belém', 'estado'=> 'PA'),
    array('nome'=> 'Aline Maria Santos', 'dtNascimento'=> '19/03/1986', 'cidade'=> 'João Pessoa', 'estado'=> 'PB'),
    array('nome'=> 'Bruno Henrique Batista', 'dtNascimento'=> '25/09/1997', 'cidade'=> 'Maceió', 'estado'=> 'AL'),
    array('nome'=> 'Carolina Barbosa Lemos', 'dtNascimento'=> '13/11/1994', 'cidade'=> 'Manaus', 'estado'=> 'AM'),
    array('nome'=> 'Eduardo Fernandes Lopes', 'dtNascimento'=> '04/01/1991', 'cidade'=> 'Teresina', 'estado'=> 'PI'),
    array('nome'=> 'Renata Cristina Melo', 'dtNascimento'=> '15/05/1990', 'cidade'=> 'São Luís', 'estado'=> 'MA'),
    array('nome'=> 'Thiago Matheus Cardoso', 'dtNascimento'=> '09/02/1983', 'cidade'=> 'Campo Grande', 'estado'=> 'MS'),
    array('nome'=> 'Beatriz Pereira Andrade', 'dtNascimento'=> '16/06/1996', 'cidade'=> 'Palmas', 'estado'=> 'TO'),
    array('nome'=> 'Rodrigo César Oliveira', 'dtNascimento'=> '03/04/1993', 'cidade'=> 'Macapá', 'estado'=> 'AP'),
    array('nome'=> 'Amanda Moreira Farias', 'dtNascimento'=> '28/08/1990', 'cidade'=> 'Aracaju', 'estado'=> 'SE'),
    array('nome'=> 'Samuel Costa Ribeiro', 'dtNascimento'=> '12/03/1999', 'cidade'=> 'Boa Vista', 'estado'=> 'RR'),
    array('nome'=> 'Priscila Alves Nascimento', 'dtNascimento'=> '07/07/1992', 'cidade'=> 'Porto Velho', 'estado'=> 'RO'),
    array('nome'=> 'Fernando Dias Pacheco', 'dtNascimento'=> '23/10/1988', 'cidade'=> 'Natal', 'estado'=> 'RN'),
    array('nome'=> 'Tatiana Martins Rezende', 'dtNascimento'=> '05/09/1985', 'cidade'=> 'Cuiabá', 'estado'=> 'MT'),
    array('nome'=> 'Marcelo Almeida Brito', 'dtNascimento'=> '11/11/1993', 'cidade'=> 'Uberlândia', 'estado'=> 'MG'),
    array('nome'=> 'Isabela Cardoso Freitas', 'dtNascimento'=> '19/05/1997', 'cidade'=> 'Sorocaba', 'estado'=> 'SP'),
    array('nome'=> 'Leonardo Matos Vieira', 'dtNascimento'=> '02/12/1994', 'cidade'=> 'Guarulhos', 'estado'=> 'SP'),
    array('nome'=> 'Letícia Moraes Silva', 'dtNascimento'=> '18/04/1990', 'cidade'=> 'Campinas', 'estado'=> 'SP'),
    array('nome'=> 'Ricardo Henrique Fonseca', 'dtNascimento'=> '08/02/1989', 'cidade'=> 'Londrina', 'estado'=> 'PR'),
    array('nome'=> 'Viviane Santana Ferreira', 'dtNascimento'=> '10/03/1996', 'cidade'=> 'Niterói', 'estado'=> 'RJ'),
    array('nome'=> 'Anderson Oliveira Ramos', 'dtNascimento'=> '03/06/1993', 'cidade'=> 'Santos', 'estado'=> 'SP'),
    array('nome'=> 'Jéssica Mendes Araújo', 'dtNascimento'=> '29/07/1987', 'cidade'=> 'Bauru', 'estado'=> 'SP'),
    array('nome'=> 'Maurício Rocha Neves', 'dtNascimento'=> '22/05/1984', 'cidade'=> 'Blumenau', 'estado'=> 'SC'),
    array('nome'=> 'Cláudia Almeida Sousa', 'dtNascimento'=> '16/08/1995', 'cidade'=> 'Pelotas', 'estado'=> 'RS'),
    array('nome'=> 'Felipe Carvalho Machado', 'dtNascimento'=> '06/01/1992', 'cidade'=> 'Maringá', 'estado'=> 'PR'),
    array('nome'=> 'Adriana Souza Leite', 'dtNascimento'=> '25/12/1998', 'cidade'=> 'Caxias do Sul', 'estado'=> 'RS'),
    array('nome'=> 'Jonathan Melo Barreto', 'dtNascimento'=> '18/11/1983', 'cidade'=> 'Uberaba', 'estado'=> 'MG'),
    array('nome'=> 'Michele Santos Braga', 'dtNascimento'=> '03/10/1994', 'cidade'=> 'Franca', 'estado'=> 'SP'),
    array('nome'=> 'Diego Batista Moreira', 'dtNascimento'=> '14/07/1986', 'cidade'=> 'Cascavel', 'estado'=> 'PR'),
    array('nome'=> 'Elaine Monteiro Pires', 'dtNascimento'=> '05/02/1993', 'cidade'=> 'Volta Redonda', 'estado'=> 'RJ'),
    array('nome'=> 'Leonardo Silva Lopes', 'dtNascimento'=> '30/06/1990', 'cidade'=> 'Piracicaba', 'estado'=> 'SP'),
    array('nome'=> 'Cíntia Mendes Santos', 'dtNascimento'=> '12/09/1987', 'cidade'=> 'Ribeirão Preto', 'estado'=> 'SP'),
    array('nome'=> 'Mariana Costa Farias', 'dtNascimento'=> '26/08/1996', 'cidade'=> 'São Bernardo do Campo', 'estado'=> 'SP'),
    array('nome'=> 'Alessandro Martins Ribeiro', 'dtNascimento'=> '13/05/1988', 'cidade'=> 'Jundiaí', 'estado'=> 'SP')
);

function calculaIdade(string $dataNascimento): int {
    // separando dd, mm, aa
    list($dia, $mes, $ano) = explode('/', $dataNascimento);

    // data atual
    $hoje = mktime(0, 0, 0, date('m'), date('d'), date('Y'));
    // Descobre a unix timestamp da data de nascimento do fulano
    $nascimento = mktime( 0, 0, 0, $mes, $dia, $ano);

    // cálculo
    $idade = floor((((($hoje - $nascimento) / 60) / 60) / 24) / 365.25);
    return $idade;
}

$pessoasFiltradas= array_filter($pessoas,function($pessoa,$indice) {
$idade=calculaIdade($pessoa['dtNascimento']);
if(((! empty($_GET["nome"])))&&stripos($pessoa["nome"],$_GET["nome"])>-1&&(! empty($_GET["idade"]))&&(! empty($_GET["cidade_nascimento"]))&&
(!empty($_GET['estado_nascimento']))){
return true;
}
else{return false;}

},ARRAY_FILTER_USE_BOTH);
?>